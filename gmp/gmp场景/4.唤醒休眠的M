休眠的M会统一放在一个队列中
比如一个运行中的G创建一个新的G,会尝试去队列中唤醒一个休眠的M,注意不是新的G放到新的M的P的本地队列中(优先放在本地队列)
从休眠的队列中拿到一个M然后剩余的M往前挪
M要跟一个空闲的P绑定,如果没有空闲的P和M绑定,这个M会回到休眠队列中
M和P绑定,然后执行G0,如果这时候本地队列为空,也就是自旋线程,回去全局队列中拿G,全局队列空就会去抢